# Получаем от пользователя слово, которое он хочет загадать
slovo1 = str(input("Введите слово которое вы загадали: "))

# Создаем пустой список, в который позже поместим буквы загаданного слова
slovo2 = []

# Цикл для моментального скрытия слова в консоле от игрока, который угадывает слово
a = 1000
while (a != -1):  
    print(".")   
    a -= 7         

# Переносим буквы из строки slovo1 в список slovo2
for i in range(len(slovo1)):  
    slovo2.append(slovo1[i])  # Каждую букву добавляем в список

# Инициализация списка, хранящего статус каждой буквы (0 означает, что буква скрыта)
b = [0]*len(slovo2)           # Столько нулей, сколько букв в слове

# Разделение графического интерфейса
print("==========================")

# Рисование начальной картинки виселицы (ASCII-графика)
print(
    r"""
        "Виселица"
         ________
        |        
        |         
        |        
        |       
        |      
        |______
        """)
# Переменная k для счета ошибок игрока (начиная с первой попытки)

k = 1
# Подсказываем игроку количество букв в слове
print('Угадай слово.')
print('В слове:', len(slovo2), 'букв.')

# Правила игры, объясняющие, как правильно вводить буквы
print(r'''Правило для правильного написания-угадывания букв:  
1. Все буквы должны быть либо большие, либо маленькие(либо все заглавные, либо все строчные).
2. Если уже знаешь слово, нужно вводить его по ОДНОЙ букве за ОДИН шаг.
3. Вводить нужно только букву, без пробелов. 
      ''')

print("У тебя есть", 8-k, "попыток.")
# Функция для рисования виселицы в зависимости от числа ошибок
def hangman(k):
    # Эта функция выбирает рисунок в зависимости от числа сделанных ошибок
    if k == 0:
        print(r"""
        "Виселица"     
         ________
        |        
        |         
        |        
        |       
        |      
        |______
        """)

    if k == 1:
        print(r"""
        "Виселица"
         ________
        |        |
        |         
        |        
        |       
        |      
        |______
        """)
    if k == 2:
        print(r"""
        "Виселица"     
         ________
        |        |
        |        O
        |        
        |       
        |      
        |______
        """)
    if k == 3:
        print(r"""
        "Виселица"
         ________
        |        |
        |        O
        |        |
        |       
        |      
        |______
        """)
    if k == 4:
        print(r"""
        "Виселица"     
         ________
        |        |
        |        O
        |       /|
        |       
        |      
        |______
        """)
    if k == 5:
        print(r"""
        "Виселица"
         ________
        |        |
        |        O
        |       /|\
        |       
        |      
        |______
        """)
    if k == 6:
        print(r"""
        "Виселица"
         ________
        |        |
        |        O
        |       /|\
        |       /
        |      
        |______
        """)
    if k == 7:
        print(r"""
        "Виселица"
         ________
        |        |
        |        O
        |       /|\
        |       / \
        |      
        |______
        """)

# Список для запоминания уже введённых букв
used_letters = []

# Основной игровой цикл продолжается, пока в списке b есть хотя бы одно незаполненное поле (0)
while (0 in b):
    print(b)                   # Показываем текущий прогресс (список открытых букв)
    s = str(input("Введи букву: "))  # Пользователь вводит букву
    
    # Проверка, вводилась ли эта буква ранее
    if s in used_letters:
        print("Вы уже вводили эту букву. Попробуйте другую.")  # Сообщаем об ошибке
        hangman(k-1)                  # Показываем предыдущую стадию виселицы
        print("У тебя осталось", 8-k, "попыток.")  # Обновляем количество оставшихся попыток
        continue                      # Возвращаемся к началу цикла
    
    # Добавляем введённую букву в список используемых
    used_letters.append(s)

    # Проверяем, есть ли введённая буква в слове
    if s in slovo2:
        # Проход по списку букв, открываем совпадающую букву
        for i in range(len(slovo2)):
            if s == slovo2[i]:          # Совпадение буквы?
                print("Ты угадал букву!")  # Сообщаем успех
                hangman(k-1)              # Отображаем виселицу без изменений
                print("У тебя осталось", 8-k, "попыток.")  # Осталось столько-то попыток
                b[i] = s                 # Открываем найденную букву
    else:
        # Если буква не найдена, увеличиваем счётчик ошибок
        print("Ты не угадал букву!")
        hangman(k)                     # Дорисовываем виселицу
        print("У тебя осталось", 7-k, "попыток.")
        k += 1                         # Увеличение счётчика ошибок

    # Выход из игры, если закончились попытки
    if k == 8:
        break

# Завершение игры: победа или поражение
if not(0 in b):                        # Победа, если открыты все буквы
    print(f"Ты угадал! Слово было: {slovo1}.")
elif k == 8:                          # Поражение, если исчерпаны попытки
    print(f"Тебя повесили! Загаданное слово было: {slovo1}.")
